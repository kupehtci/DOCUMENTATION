#VELERO #CLOUD 

# VELERO Providers

Depending on the provider where velero is going to be installed and used to backup an AKS, EKS or GKE, we must need to configure them and use different velero plugin in order to configure the correspondent CustomResourceDefinition[^1]. 

### Permissions over resources

In order to let Velero have permissions over the resources of the different providers to create the backups in the different storage locations, some permissions must be granted to the pod or the cluster where its allocated: 

* <span style="color:orange;">AWS</span>: Create an IAM role with correct permissions over the S3 to use for backups. This role can be created and assigned to the Cluster or assigned to the velero Helm release values. 
* <span style="color:DodgerBlue;">Azure</span>: Assign the Storage Blob Data Contributor and other necessary permissions to the velero identity' Service principal. 
* <span style="color:LightSalmon;">Google Cloud</span>: Use a service account with permissions to access Google Cloud Storage. 

### Storage locations

Velero needs at least a `BackupStorageLocation` and optionally a `VolumeSnapshotLocation` and depending on the provider, its stored in different ways: 

| Provider                                                          | Object Store                                                                                                     | Volume Snapshotter                                                                                                       | Plugin Provider Repo                                                                                   | Setup Instructions                                                                                                                                 | Parameters                                                                                                                                                                                                                                                    |
| ----------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [Amazon Web Services (AWS)](https://aws.amazon.com/)              | AWS S3                                                                                                           | AWS EBS                                                                                                                  | [Velero plugin for AWS](https://github.com/vmware-tanzu/velero-plugin-for-aws)                         | [AWS Plugin Setup](https://github.com/vmware-tanzu/velero-plugin-for-aws#setup)                                                                    | [BackupStorageLocation](https://github.com/vmware-tanzu/velero-plugin-for-aws/blob/main/backupstoragelocation.md)Â [VolumeSnapshotLocation](https://github.com/vmware-tanzu/velero-plugin-for-aws/blob/main/volumesnapshotlocation.md)                         |
| [Google Cloud Platform (GCP)](https://cloud.google.com/)          | [Google Cloud Storage](https://github.com/vmware-tanzu/velero-plugin-for-gcp/blob/main/backupstoragelocation.md) | [Google Compute Engine Disks](https://github.com/vmware-tanzu/velero-plugin-for-gcp/blob/main/volumesnapshotlocation.md) | [Velero plugin for GCP](https://github.com/vmware-tanzu/velero-plugin-for-gcp)                         | [GCP Plugin Setup](https://github.com/vmware-tanzu/velero-plugin-for-gcp#setup)                                                                    | [BackupStorageLocation](https://github.com/vmware-tanzu/velero-plugin-for-gcp/blob/main/backupstoragelocation.md)Â [VolumeSnapshotLocation](https://github.com/vmware-tanzu/velero-plugin-for-gcp/blob/main/volumesnapshotlocation.md)                         |
| [Microsoft Azure](https://azure.com/)                             | Azure Blob Storage                                                                                               | Azure Managed Disks                                                                                                      | [Velero plugin for Microsoft Azure](https://github.com/vmware-tanzu/velero-plugin-for-microsoft-azure) | [Azure Plugin Setup](https://github.com/vmware-tanzu/velero-plugin-for-microsoft-azure#setup)                                                      | [BackupStorageLocation](https://github.com/vmware-tanzu/velero-plugin-for-microsoft-azure/blob/main/backupstoragelocation.md)Â [VolumeSnapshotLocation](https://github.com/vmware-tanzu/velero-plugin-for-microsoft-azure/blob/main/volumesnapshotlocation.md) |
| [VMware vSphere](https://www.vmware.com/ca/products/vsphere.html) | ðŸš«                                                                                                               | vSphere Volumes                                                                                                          | [VMware vSphere](https://github.com/vmware-tanzu/velero-plugin-for-vsphere)                            | [vSphere Plugin Setup](https://github.com/vmware-tanzu/velero-plugin-for-vsphere#velero-plugin-for-vsphere-installation-and-configuration-details) | ðŸš«                                                                                                                                                                                                                                                            |


[^1]: CustomResourceDefinition [[VELERO - Custom Resource Definitions]]